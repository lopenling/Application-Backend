table:
  name: descriptions
  schema: data
object_relationships:
  - name: dictionary
    using:
      foreign_key_constraint_on: dictionary_id
  - name: updated_by
    using:
      foreign_key_constraint_on: last_updated_by
  - name: word
    using:
      foreign_key_constraint_on: word_id
insert_permissions:
  - role: org_admin
    permission:
      check:
        dictionary:
          organization:
            admin_id:
              _eq: X-Hasura-User-Id
      set:
        last_updated_by: x-hasura-User-Id
      columns:
        - description
        - dictionary_id
        - updated_at
        - word_id
  - role: team_admin
    permission:
      check:
        dictionary:
          dictionary_permissions:
            team:
              admin_id:
                _eq: X-Hasura-User-Id
      set:
        last_updated_by: x-hasura-User-Id
      columns:
        - description
        - dictionary_id
        - updated_at
  - role: translator
    permission:
      check:
        dictionary:
          dictionary_permissions:
            team:
              team_members:
                user_id:
                  _eq: X-Hasura-User-Id
      set:
        last_updated_by: x-hasura-User-Id
      columns:
        - description
select_permissions:
  - role: org_admin
    permission:
      columns:
        - id
        - word_id
        - description
        - updated_at
        - dictionary_id
        - last_updated_by
      filter:
        dictionary:
          organization:
            admin_id:
              _eq: X-Hasura-User-Id
  - role: team_admin
    permission:
      columns:
        - id
        - word_id
        - description
        - updated_at
        - dictionary_id
        - last_updated_by
      filter:
        dictionary:
          organization:
            teams:
              admin_id:
                _eq: X-Hasura-User-Id
  - role: translator
    permission:
      columns:
        - id
        - word_id
        - description
        - updated_at
        - dictionary_id
        - last_updated_by
      filter:
        dictionary:
          organization:
            teams:
              team_members:
                user_id:
                  _eq: X-Hasura-User-Id
update_permissions:
  - role: org_admin
    permission:
      columns:
        - description
        - updated_at
      filter:
        dictionary:
          organization:
            admin_id:
              _eq: X-Hasura-User-Id
      check: null
      set:
        last_updated_by: x-hasura-User-Id
  - role: team_admin
    permission:
      columns:
        - description
      filter:
        dictionary:
          dictionary_permissions:
            team:
              admin_id:
                _eq: X-Hasura-User-Id
      check: null
      set:
        last_updated_by: x-hasura-User-Id
  - role: translator
    permission:
      columns:
        - description
      filter:
        dictionary:
          dictionary_permissions:
            team:
              team_members:
                user_id:
                  _eq: X-Hasura-User-Id
      check: null
      set:
        last_updated_by: x-hasura-User-Id
delete_permissions:
  - role: org_admin
    permission:
      backend_only: false
      filter:
        dictionary:
          organization:
            admin_id:
              _eq: X-Hasura-User-Id
  - role: team_admin
    permission:
      backend_only: false
      filter:
        dictionary:
          dictionary_permissions:
            team:
              admin_id:
                _eq: X-Hasura-User-Id
